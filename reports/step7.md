## 编原step7报告

> 温佳鑫 计84 2017010335

### 1. 实验内容

这一阶段在做名称解析,  改进了符号表, 处理更全面细致的作用域. 

step5时已经实现了基本的框架. 因此step7只需要完善一下符号表的维护. 主要工作在于完善对作用域的控制,  因为step7时引入了block, 可以通过'{}'定义多个作用域. 符号表按照作用域进行划分, 每个作用域维护域内的变量, 并检查异常(同名变量声明等).

需要注意的是作用域嵌套情况的处理, 首先子作用域会继承父作用域的全部变量, 但子作用域的同名变量可以覆盖父作用域的变量. 

### 2. 思考题

##### (1) 请将下述 MiniDecaf 代码中的 `???` 替换为一个 32 位整数，使得程序运行结束后会返回 0。

0

##### (2) 在实验指导中，我们提到“就 MiniDecaf 而言，名称解析的代码也可以嵌入 IR 生成里”，但不是对于所有语言都可以把名称解析嵌入代码生成。试问被编译的语言有什么特征时，名称解析作为单独的一个阶段在 IR 生成之前执行会更好？

比如一些语言中具有变量提升这个feature. 

显然在ir生成之前，单独做一遍名称解析，确定作用域内的变量，进行错误检查，会更加合理．

否则，如果把名称解析代码嵌入到IR生成中，在处理一个未定义变量的引用时会很不优雅．

### 3. 代码复用与借鉴

(1) 借鉴了实验指导书中的提示

